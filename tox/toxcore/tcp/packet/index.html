<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `packet` mod in crate `tox`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, packet">

    <title>tox::toxcore::tcp::packet - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../../main.css">
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'>Module packet</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li></ul></div><p class='location'><a href='../../../index.html'>tox</a>::<wbr><a href='../../index.html'>toxcore</a>::<wbr><a href='../index.html'>tcp</a></p><script>window.sidebarCurrent = {name: 'packet', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Module <a href='../../../index.html'>tox</a>::<wbr><a href='../../index.html'>toxcore</a>::<wbr><a href='../index.html'>tcp</a>::<wbr><a class="mod" href=''>packet</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../../src/tox/toxcore/tcp/packet.rs.html#22-496' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Top-level TCP Packets according
to <a href="https://zetok.github.io/tox-spec/#encrypted-payload-types">Tox spec</a></p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.ConnectNotification.html"
                                  title='struct tox::toxcore::tcp::packet::ConnectNotification'>ConnectNotification</a></td>
                           <td class='docblock-short'>
                                <p>Sent by server to client.
Tell the client that connection_id is now connected meaning the other
is online and data can be sent using this <code>connection_id</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.Data.html"
                                  title='struct tox::toxcore::tcp::packet::Data'>Data</a></td>
                           <td class='docblock-short'>
                                <p>Sent by client to server.
The client sends data with <code>connection_id</code> and the server
relays it to the given connection</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.DisconnectNotification.html"
                                  title='struct tox::toxcore::tcp::packet::DisconnectNotification'>DisconnectNotification</a></td>
                           <td class='docblock-short'>
                                <p>Sent by client to server.
Sent when client wants the server to forget about the connection related
to the connection_id in the notification. Server must remove this connection
and must be able to reuse the <code>connection_id</code> for another connection. If the
connection was connected the server must send a disconnect notification to the
other client. The other client must think that this client has simply
disconnected from the TCP server.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.EncryptedPacket.html"
                                  title='struct tox::toxcore::tcp::packet::EncryptedPacket'>EncryptedPacket</a></td>
                           <td class='docblock-short'>
                                <p>Packets are encrypted and sent in this form.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.OobReceive.html"
                                  title='struct tox::toxcore::tcp::packet::OobReceive'>OobReceive</a></td>
                           <td class='docblock-short'>
                                <p>Sent by server to client.
OOB recv are sent with the announced public key of the peer that sent the
OOB send packet and the exact data.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.OobSend.html"
                                  title='struct tox::toxcore::tcp::packet::OobSend'>OobSend</a></td>
                           <td class='docblock-short'>
                                <p>Sent by client to server.
If a peer with private key equal to the key they announced themselves with is
connected, the data in the OOB send packet will be sent to that peer as an
OOB recv packet. If no such peer is connected, the packet is discarded. The
toxcore <code>TCP_server</code> implementation has a hard maximum OOB data length of 1024.
1024 was picked because it is big enough for the <code>net_crypto</code> packets related
to the handshake and is large enough that any changes to the protocol would not
require breaking <code>TCP server</code>. It is however not large enough for the bigges
<code>net_crypto</code> packets sent with an established <code>net_crypto</code> connection to
prevent sending those via OOB packets.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.PingRequest.html"
                                  title='struct tox::toxcore::tcp::packet::PingRequest'>PingRequest</a></td>
                           <td class='docblock-short'>
                                <p>Sent by both client and server, both will respond.
Ping packets are used to know if the other side of the connection is still
live. TCP when established doesn&#39;t have any sane timeouts (1 week isn&#39;t sane)
so we are obliged to have our own way to check if the other side is still live.
Ping ids can be anything except 0, this is because of how toxcore sets the
variable storing the <code>ping_id</code> that was sent to 0 when it receives a pong
response which means 0 is invalid.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.PongResponse.html"
                                  title='struct tox::toxcore::tcp::packet::PongResponse'>PongResponse</a></td>
                           <td class='docblock-short'>
                                <p>Sent by both client and server, both will respond.
The server should respond to ping packets with pong packets with the same <code>ping_id</code>
as was in the ping packet. The server should check that each pong packet contains
the same <code>ping_id</code> as was in the ping, if not the pong packet must be ignored.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.RouteRequest.html"
                                  title='struct tox::toxcore::tcp::packet::RouteRequest'>RouteRequest</a></td>
                           <td class='docblock-short'>
                                <p>Sent by client to server.
Send a routing request to the server that we want to connect
to peer with public key where the public key is the public the peer
announced themselves as. The server must respond to this with a <code>RouteResponse</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.RouteResponse.html"
                                  title='struct tox::toxcore::tcp::packet::RouteResponse'>RouteResponse</a></td>
                           <td class='docblock-short'>
                                <p>Sent by server to client.
The response to the routing request, tell the client if the
routing request succeeded (valid <code>connection_id</code>) and if it did,
tell them the id of the connection (<code>connection_id</code>). The public
key sent in the routing request is also sent in the response so
that the client can send many requests at the same time to the
server without having code to track which response belongs to which public key.</p>
                           </td>
                       </tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="enum" href="enum.Packet.html"
                                  title='enum tox::toxcore::tcp::packet::Packet'>Packet</a></td>
                           <td class='docblock-short'>
                                <p>Top-level TCP packet.</p>
                           </td>
                       </tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="constant" href="constant.MAX_TCP_ENC_PACKET_SIZE.html"
                                  title='constant tox::toxcore::tcp::packet::MAX_TCP_ENC_PACKET_SIZE'>MAX_TCP_ENC_PACKET_SIZE</a></td>
                           <td class='docblock-short'>
                                <p>A serialized EncryptedPacket should be not longer than 2050 bytes</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="constant" href="constant.MAX_TCP_PACKET_SIZE.html"
                                  title='constant tox::toxcore::tcp::packet::MAX_TCP_PACKET_SIZE'>MAX_TCP_PACKET_SIZE</a></td>
                           <td class='docblock-short'>
                                <p>A serialized Packet should be not longer than 2032 bytes</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../../";
        window.currentCrate = "tox";
    </script>
    <script src="../../../../main.js"></script>
    <script defer src="../../../../search-index.js"></script>
</body>
</html>